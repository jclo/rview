/*! ****************************************************************************
 * RView v0.0.1
 *
 * A companion Reactive View library for building web applications.
 * (you can download it from npm or github repositories)
 * Copyright (c) 2020 Mobilabs <contact@mobilabs.fr> (http://www.mobilabs.fr).
 * Released under the MIT license. You may obtain a copy of the License
 * at: http://www.opensource.org/licenses/mit-license.php).
 * Built from ES6Kadoo v0.0.0-beta.9.
 * ************************************************************************** */
/*! Generated by Kadoo v0.0.0-beta.6 */
const $__ES6GLOB={};!function(t,e){"use strict";"function"==typeof define&&define.amd?define([""],e):"object"==typeof exports?module.exports=e(t):t.RView=e(t)}($__ES6GLOB,t=>{"use strict";let e={src:{rview:{},component:{main:{},hyperscript:{},diffing:{},generic:{},$:{},animate:{},render:{},setstate:{},util:{}},renderer:{main:{}},lib:{_:{}},plugin:{main:{}}},extend:function(t,e){for(var n=Object.keys(e),i=0;i<n.length;i++)t[n[i]]=e[n[i]]}};return function(){const n=e.src.component.main,i=e.src.renderer.main,{_:r}=e.src.lib,s=e.src.component.hyperscript,o=e.src.component.diffing,c=e.src.plugin.main,l=t.RView,a={_setTestMode:()=>[r,n.Component,s,o],noConflict(){return t.RView=l,this},h:(...t)=>s.format(...t),Component:t=>n.Component(t),render:t=>i.render(t),restore:t=>i.restore(t),remove:t=>i.remove(t),plugin:t=>c.plugin(t),NAME:"RView",VERSION:"0.0.1"};e.src.rview=a}(),function(){const{_:t}=e.src.lib,n=e.src.component.generic,i=e.src.component.$;e.extend(e.src.component.main,{Component:function(e){let r;const s=function(){return this instanceof s?n.Construct.apply(this,r):(r=arguments,new s)},o=t.assign({},n.methods),c=t.assign(o,{$:i.$});return s.prototype=t.assign(c,e||{}),s.prototype.constructor=s,s}})}(),function(){const t=e.src.component.main,{_:n}=e.src.lib,i=e.src.plugin.main;function r(t){const e={el:"body",children:null,template:"<div></div>"};return t.el&&(!n.isString(t.el)||"#"!==t.el.charAt(0)&&"."!==t.el.charAt(0)?n.isObject(t.el)&&t.el.namespaceURI?e.el=t.el:t.silent||console.log("warning: el must be an id, a class or a node element!"):e.el=t.el),n.isString(t.template)?e.template=function(t){const e=document.createElement("div");if(e.innerHTML=t,e.children.length>1)return`<div>${t}</div>`;const n=e.firstElementChild;if(!n)return"<div></div>";const i=n.tagName.toLocaleLowerCase();return"div"!==i&&"header"!==i&&"footer"!==i?`<div>${t}</div>`:t}(t.template):t.silent||console.log("warning: template must be an XMLString starting with <div or <header or <footer!"),e.children=t.children,e}function s(t){const e=n.isString(t.el)?document.querySelector(t.el):t.el;"body"===t.el?e.innerHTML+=t.template:e.innerHTML=t.template}function o(e){const o=r(e),c=i.get("messenger");if(!e.children&&!e.template)return function(e,r){const{methods:s}=e||{},o=i.get("messenger");if("body"===r.el)return null;const c=n.isString(r.el)?document.querySelector(r.el):r.el,l=c.outerHTML,a=c.getAttribute("id"),u=c.className,d=c.getAttribute("style"),h=t.Component(n.extend(s,{init(){this.state.class=u||"",this.state.style=d||"",this.state.inside=""},render:t=>`\n            <div class="${t.class}" style="${t.style}">${t.inside}</div>\n          `}))(),f=h._renderer(),p=document.createElement("template");p.innerHTML=f;const m=p.content.firstChild;return c.parentNode.replaceChild(m,c),a&&(m.setAttribute("id",a),h.id=a),h._mess=o?o():null,h._initialXMLNode=l,h}(e,o);if(!o.children)return s(o),null;const l=t.Component({render(){return this.name="firstparent",this.children=o.children,o.template}})();return o.template=l._renderer(),s(o),l._mess=c?c():null,function t(e,n){if(e._cList){const i=Object.keys(e._cList);for(let r=0;r<i.length;r++)e._cList[i[r]]._mess=n,t(e._cList[i[r]],n)}}(l,l._mess),function t(e){if(e._cList){const n=Object.keys(e._cList);for(let i=0;i<n.length;i++)e._cList[n[i]].events(),t(e._cList[n[i]])}}(l),l}const c={render:t=>o(t),restore:t=>function(t){if(t&&t._initialXMLNode){const e=document.createElement("template");e.innerHTML=t._initialXMLNode;const n=e.content.firstChild;return t.$()[0].parentNode.replaceChild(n,t.$()[0]),!0}return!1}(t),remove(t){return(e=t).$().remove(),Object.keys(e).forEach(t=>{delete e[t]}),e.__proto__={},!0;var e}};e.extend(e.src.renderer.main,c)}(),function(){const t={extend(t,e){const n=Object.keys(e);for(let i=0;i<n.length;i++)t[n[i]]=e[n[i]];return t},assign(){const t=arguments[0];let e,n,i;for(i=1;i<arguments.length;i++)e=arguments[i],n=Object.keys(e).reduce((t,n)=>(t[n]=Object.getOwnPropertyDescriptor(e,n),t),{});return Object.defineProperties(t,n),t},isString:t=>"[object String]"===Object.prototype.toString.call(t),isNumber:t=>"[object Number]"===Object.prototype.toString.call(t),isObject(t){const e=typeof t;return("function"===e||"object"===e)&&!!t},isLiteralObject:t=>"[object Object]"===Object.prototype.toString.call(t),isFunction:t=>"[object Function]"===Object.prototype.toString.call(t),isArray:t=>"[object Array]"===Object.prototype.toString.call(t)};e.extend(e.src.lib._,t)}(),function(){const{_:t}=e.src.lib;function n(t){const e=Object.keys(t);let n="";for(let i=0;i<e.length;i++)n+=i<e.length-1?`${e[i]}: ${t[e[i]]}; `:`${e[i]}: ${t[e[i]]};`;return n}const i={format(...t){const[e,n,...i]=t;return{nodeName:e,attributes:n,children:i}},render(e,i){const r={};return function(t,e,n){const i=Object.keys(n);for(let r=0;r<i.length;r++)t=t.replace(`</${i[r].toLowerCase()}>`,"").replace(i[r].toLowerCase(),i[r]+" /"),e[`<${i[r]} />`]=n[i[r]];return t}((new XMLSerializer).serializeToString(function e(i,r){const{nodeName:s}=i,{attributes:o}=i,{children:c}=i;let l,a,u,d,h,f;if(t.isString(i))return document.createTextNode(i);switch(typeof s){case"string":for(l=document.createElement(s),a=o?Object.keys(o):[],f=0;f<a.length;f++)u=t.isObject(o[a[f]])?n(o[a[f]]):o[a[f]],l.setAttribute(a[f],u);break;case"function":d=s(),d.render?(h=o&&o.name?o.name:"C"+Math.random().toString(36).substr(2,7),r[h]={fn:s,state:o.state?o.state:null,props:o.props?o.props:null},l=e({nodeName:h,attributes:null,children:[]},r)):l=e(d,r);break;default:throw new Error(`hypserscript._render: nodeName is a ${typeof s} ???`)}for(f=0;f<c.length;f++)l.appendChild(e(c[f],r));return l}(e,r)).replace('xmlns="http://www.w3.org/1999/xhtml"',""),i,r)}};e.extend(e.src.component.hyperscript,i)}(),function(){function t(t){return 3===t.nodeType?"text":8===t.nodeType?"comment":t.tagName.toLowerCase()}function n(t){return t.childNodes&&t.childNodes.length>0?null:t.textContent}function i(t,e){const n=t.getAttributeNames(),i=e.getAttributeNames();for(let i=0;i<n.length;i++){const r=n[i],s=e.attributes.getNamedItem(r),o=t.getAttribute(r),c=e.getAttribute(r);s&&c===o||e.setAttribute(r,o)}for(let t=0;t<i.length;t++)-1===n.indexOf(i[t])&&e.removeAttribute(i[t])}const r={stringToHTML:t=>function(t){return(new DOMParser).parseFromString(t,"text/html").body.firstChild}(t),diff(e,r){!function e(r,s){const o=Array.prototype.slice.call(r.childNodes),c=Array.prototype.slice.call(s.childNodes);let l=c.length-o.length;if(l>0)for(;l>0;l--)c[c.length-l].parentNode.removeChild(c[c.length-l]);o.forEach((r,o)=>{if(!c[o])return void s.appendChild(r.cloneNode(!0));if(t(r)!==t(c[o]))return void c[o].parentNode.replaceChild(r.cloneNode(!0),c[o]);const l=n(r);l&&l!==n(c[o])&&(c[o].textContent=l);const a=t(r);if("text"!==a&&"comment"!==a&&(r.hasAttributes()||c[o].hasAttributes())&&i(r,c[o]),c[o].childNodes.length>0&&r.childNodes.length<1)c[o].innerHTML="";else{if(c[o].childNodes.length<1&&r.childNodes.length>0){const t=document.createDocumentFragment();return e(r,t),void c[o].appendChild(t)}r.childNodes.length>0&&e(r,c[o])}})}(e,r),i(e,r)}};e.extend(e.src.component.diffing,r)}(),function(){const{_:t}=e.src.lib;const n={_db:{messenger:null},plugin(e){return function(e,n){return!(!t.isLiteralObject(n)||!n.messenger||"Messenger"!==n.messenger.NAME)&&(e.messenger=n.messenger,!0)}(this._db,e)},get(e){return t.isString(e)&&this._db[e]?this._db[e]:null}};e.extend(e.src.plugin.main,n)}(),function(){const{_:t}=e.src.lib,n=e.src.component.animate,i=e.src.component.render,r=e.src.component.hyperscript,s=e.src.component.setstate,o=e.src.component.util;const c={_init(...e){this._tag=null,this._cList=null,this._mess=null,this.id="i"+Math.random().toString(36).substr(2,7),this.children=null;const[n,i]=e;return this.state=t.isLiteralObject(n)?n:{},this.props=t.isLiteralObject(i)?i:{},this.name="mynameisnobody",this.init(),this},_renderer(){return i.render(this)},$:null,$animate(...t){return n.animate(this,...t),this},$getChild(t){return o.getChild(this,t)},$getChildren(){return o.getChildren(this)},$getIdAndName(){return{id:this.id,name:this.name}},$hyperscript:(...t)=>r.format(...t),$setState(e){return t.isLiteralObject(e)&&s.setState(this,e),this},$listen(t,e){return this._mess?(this._mess.subscribe(t,e),this):(console.log("$listen: the plugin Messenger is not installed!"),this)},$emit(t,e){return this._mess?(this._mess.publish(t,e),this):(console.log("$emit: the plugin Messenger is not installed!"),this)},init(){return this},events(){return this},render:()=>"<div></div>"};e.extend(e.src.component.generic,{Construct:function(){this._init.apply(this,arguments)},methods:c})}(),e.extend(e.src.component.$,{$:function(t){const e=this.id;let n,i;return t?n=document.querySelector("#"+e).querySelector(t):(n=document.querySelector("#"+e),i=n),{0:n,id:n?n.id:null,_root:i,select:function(t){if("string"==typeof t&&this[0]){const e=this[0].querySelector(t);e&&(this[0]=e)}return this},selectChild:function(t){return"[object Number]"===Object.prototype.toString.call(t)&&(this[0]=this[0].children[t]?this[0].children[t]:this[0]),this},parent:function(){return this._root?this[0]!==this._root&&(this[0]=this[0].parentNode):this[0]=this[0].parentNode,this},firstParent:function(){return this._root&&(this[0]=this._root),this},find:function(t){return this[0].querySelectorAll(t)},tag:function(){return this[0]?this[0].tagName:null},innerHTML:function(){return this[0].innerHTML},outerHTML:function(){return this[0].outerHTML},text:function(){return this[0].textContent},firstChild:function(){return this[0].firstElementChild},children:function(){return this[0].children},childIndex:function(){let t=this[0],e=0;for(;null!==t;)t=t.previousElementSibling,e+=1;return e-1},getBoundingClientRect:function(){return this[0]?this[0].getBoundingClientRect():null},css:function(t){const e="string"==typeof t?t.split("-"):[];let n="";for(let t=0;t<e.length;t++)n+=0===t?e[t]:e[t].charAt(0).toUpperCase()+e[t].slice(1);return this[0].style[n]},getClassList:function(){return this[0].classList},hasClass:function(t){const e=this[0].classList.value.split(" ");return"[object String]"===Object.prototype.toString.call(t)&&-1!==e.indexOf(t)},attr:function(t){return this[0].getAttribute(t)},on:function(t,e){return this[0].addEventListener(t,e),this},off:function(t,e){return this[0].removeEventListener(t,e),this},trigger:function(t){return this[0].dispatchEvent(new Event(t))},remove:function(){return this[0].parentNode.removeChild(this[0]),this}}}}),function(){const{_:t}=e.src.lib;function n(t,e,n,i){return n*(.5-Math.cos(t/i*Math.PI)/2)+e}function i(t){return!("function"!=typeof t||"linear"!==t.name&&"swing"!==t.name&&!t.name.startsWith("easeIn")&&!t.name.startsWith("easeOut"))}function r(e,r,...s){if(!t.isLiteralObject(r))return;const o=function(...e){const n=e[0],r=e[1],s=e[2];let o,c,l,a;switch(o=n||r||s?!n||r||r?n&&r&&!s?2:3:1:0,o){case 0:break;case 1:t.isNumber(n)||"fast"===n||"slow"===n?c=n:t.isString(n)||i(n)?l=n:t.isFunction(n)&&(a=n);break;case 2:t.isNumber(n)||"fast"===n||"slow"===n?(c=n,t.isString(r)||i(r)?l=r:t.isFunction(r)&&(a=r)):(t.isString(n)||i(n))&&(l=n,t.isFunction(r)&&(a=r));break;case 3:(t.isNumber(n)||"fast"===n||"slow"===n)&&(c=n),(t.isString(r)||i(r))&&(l=r),t.isFunction(s)&&(a=s)}return{duration:c,easing:l,callback:a}}(...s),c=t.isNumber(o.duration)&&o.duration>0?o.duration:"fast"===(l=o.duration)?200:"slow"===l?600:400;var l;!function(e,n,i,r,s,o){const c=Object.keys(n),l=void 0!==n.$rpath?n.$rpath.split("."):[],a=c.indexOf("$rpath"),u={},d={};let h,f,p=0;a>-1&&c.splice(a,1);let m=e.state;l.forEach(t=>{m=m[t]}),c.forEach(e=>{h=parseFloat(m[e],10),u[e]={initial:parseFloat(m[e],10),change:parseFloat(n[e],10)-h,suffix:t.isString(n[e])?n[e].replace(/[0-9.]/g,""):""}});const g=setInterval(()=>{for(let t=0;t<c.length;t++)f=i(p,u[c[t]].initial,u[c[t]].change,r),d[c[t]]=f+u[c[t]].suffix;if(a>-1){Object.keys(d).forEach(t=>{m[t]=d[t]}),e.$setState({})}else e.$setState(d);p+=s,p>r&&(clearInterval(g),o&&o())},s)}(e,r,!o.easing||t.isString(o.easing)?n:o.easing,c,10,o.callback?o.callback:null)}const s={animate(t,e,...n){r(t,e,...n)}};e.extend(e.src.component.animate,s)}(),function(){const{_:t}=e.src.lib,n=e.src.component.hyperscript;function i(t,e){const n=document.createElement("div");if(n.innerHTML=t,n.children.length>1)return[`<div id="${e}">${t}</div>`,!0];const i=n.firstElementChild;if(!i)return[`<div id="${e}"></div>`,!0];const r=i.tagName.toLocaleLowerCase();return"div"!==r&&"header"!==r&&"footer"!==r?[`<div id="${e}">${t}</div>`,!0]:"div"===r?[t.replace(/^\s*<div/,`<div id="${e}"`),!1,"div"]:"header"===r?[t.replace(/^\s*<header/,`<header id="${e}"`),!1,"header"]:[t.replace(/^\s*<footer/,`<footer id="${e}"`),!1,"footer"]}function r(e){let r,s;r=e.render(e.state,e.props),t.isLiteralObject(r)&&t.isString(r.nodeName)&&(e.children={},r=n.render(r,e.children));const[o,c,l]=i(r,e.id);if(s=o,e._tdiv=c?"div":null,e._ttag=l||null,e.children){e.children=function(e){if(!t.isLiteralObject(e))return{};const n={},i=Object.keys(e);let r;for(let s=0;s<i.length;s++)r=i[s],t.isFunction(e[r])?n[r]={fn:e[r],state:null,props:null}:t.isLiteralObject(e[r])&&t.isFunction(e[r].fn)?n[r]={fn:e[r].fn,state:t.isLiteralObject(e[r].state)?e[r].state:null,props:t.isLiteralObject(e[r].props)?e[r].props:null}:(n[r]={fn:null,state:null,props:null},console.log('warning: this component list is invalid. key "c" is missing!'));return n}(e.children),e._cList={};const n=Object.keys(e.children);let i,r;for(let o=0;o<n.length;o++)i=n[o],t.isFunction(e.children[i].fn)?(r=e.children[i].fn(e.children[i].state,e.children[i].props),r._tag=i,s=s.replace(i,r._renderer()),e._cList[i.replace(/[^a-zA-z0-9]/g,"")]=r):console.log(`warning: there is no component associated to this tag: ${i}!`)}return s}function s(e){let r=e.render(e.state,e.props);return t.isLiteralObject(r)&&t.isString(r.nodeName)&&(r=n.render(r,{})),i(r,e.id)[0]}const o={render:t=>r(t),reRender:t=>function t(e,n){if(e._cList){const i=Object.keys(e._cList);for(let r=0;r<i.length;r++){const o=e._cList[i[r]];n=t(o,n.replace(o._tag,s(o)))}}return n}(t,s(t))};e.extend(e.src.component.render,o)}(),function(){const t=e.src.component.diffing,n=e.src.component.render;const i={setState(e,i){!function(e,i){const{state:r}=e,s=Object.keys(i);for(let t=0;t<s.length;t++)r[s[t]]=i[s[t]];const o=n.reRender(e);t.diff(t.stringToHTML(o),e.$()[0])}(e,i)}};e.extend(e.src.component.setstate,i)}(),function(){const{_:t}=e.src.lib;const n={getChildren:t=>t._cList?function(t){const e=Object.keys(t._cList),n=[];for(let i=0;i<e.length;i++)n.push({id:t._cList[e[i]].id,name:t._cList[e[i]].name});return n}(t):null,getChild:(e,n)=>n&&t.isString(n)?function t(e,n){if(!e._cList)return null;const i=Object.keys(e._cList);let r;for(let s=0;s<i.length;s++){if(r=i[s],n===e._cList[r]._tag||n===e._cList[r].id||n===e._cList[r].name)return e._cList[r];const o=t(e._cList[r],n);if(o)return o}return null}(e,n):null};e.extend(e.src.component.util,n)}(),e.src.rview});export const{h:h}=$__ES6GLOB.RView;export const{Component:Component}=$__ES6GLOB.RView;export const{render:render}=$__ES6GLOB.RView;export const{plugin:plugin}=$__ES6GLOB.RView;export const{RView:RView}=$__ES6GLOB;